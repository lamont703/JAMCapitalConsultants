<style>
    /* Credit Assessment Module Styles */

    /* Quiz Button Styles */
    .credit-assessment-quiz-button-container {
        margin: 1rem auto;
        text-align: center;
        width: 50%;
        max-width: 400px;
        padding: 0 1rem;
        box-sizing: border-box;
    }

    .credit-assessment-credit-quiz-btn {
        background-color: #09ccfc;
        color: #FFFFFF;
        padding: 1rem 1.5rem;
        border-radius: 12px;
        border: none;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
    }

    .credit-assessment-credit-quiz-btn:hover {
        background-color: #08b6e2;
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(9, 204, 252, 0.2);
    }

    .credit-assessment-quiz-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(9, 204, 252, 0.4) 100%);
        z-index: 10000;
        -webkit-overflow-scrolling: touch;
        box-sizing: border-box;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        backdrop-filter: blur(4px);
    }

    .credit-assessment-modal-content {
        position: relative;
        background: linear-gradient(to bottom, #ffffff, #f8fdff);
        padding: 1.5rem;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        box-sizing: border-box;
        width: 92%;
        max-width: 800px;
        height: 92vh;
        border-radius: 12px;
        margin: auto;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        animation: modalFadeIn 0.4s ease;
    }

    @keyframes modalFadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .credit-assessment-close-button {
        position: fixed;
        top: 0.75rem;
        right: 0.75rem;
        padding: 0.75rem;
        font-size: 1.5rem;
        cursor: pointer;
        color: #666;
        transition: all 0.3s ease;
        z-index: 10001;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 50%;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .credit-assessment-quiz-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 1.5rem;
        box-sizing: border-box;
        width: 100%;
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(145deg, #ffffff, #f8fdff);
        border-radius: 10px;
        position: relative;
        overflow: hidden;
    }

    .credit-assessment-question-title {
        font-size: 1.5rem;
        margin-bottom: 2rem;
        text-align: center;
        padding: 0 1rem;
        color: #2c3e50;
        position: relative;
    }

    .credit-assessment-options-grid {
        display: grid;
        gap: 1rem;
        padding: 0;
        margin-bottom: 2rem;
        box-sizing: border-box;
        width: 100%;
    }

    .credit-assessment-option-btn {
        background: #fff;
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        padding: 1.25rem;
        width: 100%;
        text-align: left;
        display: flex;
        align-items: center;
        gap: 1.25rem;
        transition: all 0.3s ease;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }

    .credit-assessment-option-btn:hover {
        border-color: #09ccfc;
        background: linear-gradient(145deg, #f7fafa, #e6f7fa);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(9, 204, 252, 0.15);
    }

    .credit-assessment-option-btn.selected {
        border-color: #09ccfc;
        background: linear-gradient(145deg, #e6f7fa, #d9f4fa);
        box-shadow: 0 3px 10px rgba(9, 204, 252, 0.2);
    }

    .credit-assessment-quiz-navigation {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.25rem;
        background: linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(248, 253, 255, 0.95));
        border-top: 1px solid rgba(9, 204, 252, 0.1);
        margin-top: 1.5rem;
    }

    .credit-assessment-nav-btn {
        padding: 0.875rem 1.75rem;
        border-radius: 30px;
        border: none;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 120px;
        font-size: 1rem;
    }

    .credit-assessment-nav-btn.primary {
        background: linear-gradient(to right, #09ccfc, #08b6e2);
        color: white;
        box-shadow: 0 2px 8px rgba(9, 204, 252, 0.3);
    }

    .credit-assessment-nav-btn.secondary {
        background-color: #f5f5f5;
        color: #555;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .credit-assessment-form-input {
        width: 100%;
        padding: 1.125rem;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 1rem;
        transition: all 0.3s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        background-color: rgba(255, 255, 255, 0.8);
        box-sizing: border-box;
    }

    .credit-assessment-form-input:focus {
        outline: none;
        border-color: #09ccfc;
        box-shadow: 0 0 0 3px rgba(9, 204, 252, 0.15);
        background-color: #fff;
    }

    /* Mobile Responsive */
    @media (max-width: 639px) {
        .credit-assessment-modal-content {
            width: 100%;
            height: 100vh;
            border-radius: 0;
            padding: 1rem;
        }

        .credit-assessment-question-title {
            font-size: 1.25rem;
        }

        .credit-assessment-options-grid {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .credit-assessment-quiz-navigation {
            position: sticky;
            bottom: 0;
            margin: 0 -1rem;
            padding: 1rem;
        }
    }
</style>



<script>
    // JAM Capital Consultants - Credit Assessment Module
    // A loadable HTML module for credit assessment quiz functionality

    (function (global) {
        'use strict';

        // Create the main module object
        const JAMCreditAssessment = {
            initialized: false,

            // HTML template for the credit assessment
            htmlTemplate: `
                    <div id="jamCreditAssessmentModal" class="credit-assessment-quiz-modal">
                        <div class="credit-assessment-modal-content">
                            <span class="credit-assessment-close-button">&times;</span>
                            <div class="credit-assessment-quiz-container">
                                <div class="credit-assessment-quiz-steps">
                                    <!-- Quiz steps will be inserted here -->
                    </div>
                                <div class="credit-assessment-quiz-navigation">
                                    <button id="jamCreditAssessmentPrevBtn" class="credit-assessment-nav-btn secondary" style="display: none;">Previous</button>
                                    <button id="jamCreditAssessmentNextBtn" class="credit-assessment-nav-btn primary">Next</button>
                </div>
                    </div>
                </div>
                    </div>
                `,

            // Quiz questions data
            quizQuestions: [
                {
                    question: "Which best describes your current credit situation?",
                    options: [
                        { value: "no_credit", text: "I have no credit history", icon: "üìä" },
                        { value: "below_580", text: "My score is below 580", icon: "üìâ" },
                        { value: "580_669", text: "My score is between 580-669", icon: "üìà" },
                        { value: "670_739", text: "My score is between 670-739", icon: "üìä" },
                        { value: "above_740", text: "My score is above 740", icon: "üåü" }
                    ]
                },
                {
                    question: "What's your main credit goal right now?",
                    options: [
                        { value: "buy_home", text: "Buy a home", icon: "üè†" },
                        { value: "new_car", text: "Get a new car", icon: "üöó" },
                        { value: "credit_card", text: "Get a credit card or loan", icon: "üí≥" },
                        { value: "improve_score", text: "Improve my credit score overall", icon: "üìà" },
                        { value: "remove_negative", text: "Remove negative items from my report", icon: "üéØ" }
                    ]
                },
                {
                    question: "How many active credit cards or loans do you currently have?",
                    options: [
                        { value: "none", text: "None", icon: "0Ô∏è‚É£" },
                        { value: "1-2", text: "1‚Äì2", icon: "1Ô∏è‚É£" },
                        { value: "3-5", text: "3‚Äì5", icon: "3Ô∏è‚É£" },
                        { value: "6+", text: "6 or more", icon: "6Ô∏è‚É£" },
                        { value: "not_sure", text: "Not sure", icon: "‚ùì" }
                    ]
                },
                {
                    question: "Have you checked your credit report in the last 6 months?",
                    options: [
                        { value: "yes", text: "Yes", icon: "‚úÖ" },
                        { value: "no", text: "No", icon: "‚ùå" },
                        { value: "not_sure", text: "I'm not sure", icon: "‚ùì" }
                    ]
                },
                {
                    question: "Which of these credit issues applies to you?",
                    options: [
                        { value: "late_payments", text: "Late payments", icon: "‚è∞" },
                        { value: "collections", text: "Collections accounts", icon: "üìë" },
                        { value: "high_balances", text: "High credit card balances", icon: "üí∞" },
                        { value: "bankruptcy", text: "Bankruptcy", icon: "‚öñÔ∏è" },
                        { value: "no_issues", text: "No major issues ‚Äî just want to improve", icon: "‚ú®" },
                        { value: "not_sure", text: "Not sure", icon: "‚ùì" }
                    ]
                },
                {
                    question: "Would you be interested in expert help to fix your credit faster?",
                    options: [
                        { value: "very_interested", text: "Yes, I'm very interested", icon: "üéØ" },
                        { value: "maybe", text: "Maybe, tell me more", icon: "ü§î" },
                        { value: "not_now", text: "Not right now, just exploring", icon: "üìö" }
                    ]
                },
                {
                    question: "Where should we send your personalized guide?",
                    isForm: true,
                    fields: [
                        { type: "text", id: "name", placeholder: "Your Name", required: true },
                        { type: "email", id: "email", placeholder: "Your Email", required: true },
                        { type: "tel", id: "phone", placeholder: "Phone Number (Optional)", required: false }
                    ]
                }
            ],

            // Initialize the credit assessment module
            init: function (options = {}) {
                if (this.initialized) return;

                console.log('üöÄ Initializing JAM Credit Assessment Module...');

                // Inject HTML
                this.injectHTML();

                // Initialize functionality
                this.initializeQuiz();

                this.initialized = true;

                // Custom configuration
                this.config = {
                    onComplete: options.onComplete || this.defaultOnComplete,
                    onStart: options.onStart || this.defaultOnStart,
                    ...options
                };

                console.log('‚úÖ JAM Credit Assessment Module initialized successfully');
            },

            // Inject HTML into the page
            injectHTML: function () {
                if (document.getElementById('jamCreditAssessmentModal')) return;

                const container = document.createElement('div');
                container.innerHTML = this.htmlTemplate;
                document.body.appendChild(container.firstElementChild);
            },

            // Initialize quiz functionality
            initializeQuiz: function () {
                this.currentStep = 1;
                this.totalSteps = this.quizQuestions.length;
                this.quizData = {};

                this.renderQuizStep(1);
                this.bindEvents();
            },

            // Render a specific quiz step
            renderQuizStep: function (stepNumber) {
                const container = document.querySelector('.credit-assessment-quiz-steps');
                const question = this.quizQuestions[stepNumber - 1];

                if (question.isForm) {
                    // Render form step
                    container.innerHTML = `
                            <h2 class="credit-assessment-question-title">${question.question}</h2>
                            <div style="max-width: 400px; margin: 0 auto;">
                                ${question.fields.map(field => `
                                    <div style="margin-bottom: 1.5rem;">
                                        <input 
                                            type="${field.type}" 
                                            id="jamCreditAssessment${field.id}" 
                                            class="credit-assessment-form-input" 
                                            placeholder="${field.placeholder}" 
                                            ${field.required ? 'required' : ''}
                                        >
        </div>
                                `).join('')}
                        </div>
                        `;
                } else {
                    // Render options step
                    container.innerHTML = `
                            <h2 class="credit-assessment-question-title">${question.question}</h2>
                            <div class="credit-assessment-options-grid">
                                ${question.options.map(option => `
                                    <button class="credit-assessment-option-btn" data-value="${option.value}">
                                        <span style="font-size: 1.5rem; min-width: 2rem;">${option.icon}</span>
                                        <span style="font-size: 1.1rem; flex: 1; font-weight: 500;">${option.text}</span>
                    </button>
                                `).join('')}
        </div>
    `;
                }

                this.updateNavigation();
            },

            // Update navigation buttons
            updateNavigation: function () {
                const prevBtn = document.getElementById('jamCreditAssessmentPrevBtn');
                const nextBtn = document.getElementById('jamCreditAssessmentNextBtn');

                prevBtn.style.display = this.currentStep > 1 ? 'block' : 'none';
                nextBtn.textContent = this.currentStep === this.totalSteps ? 'Submit' : 'Next';
                nextBtn.disabled = !this.isCurrentStepComplete();
            },

            // Check if current step is complete
            isCurrentStepComplete: function () {
                if (this.currentStep === this.totalSteps) {
                    // Form step - check required fields
                    const nameField = document.getElementById('jamCreditAssessmentname');
                    const emailField = document.getElementById('jamCreditAssessmentemail');
                    return nameField && emailField && nameField.value.trim() && emailField.value.trim();
                } else {
                    // Option step - check if option selected
                    return this.quizData[`question_${this.currentStep}`] !== undefined;
                }
            },

            // Bind event listeners
            bindEvents: function () {
                const modal = document.getElementById('jamCreditAssessmentModal');
                const closeBtn = document.querySelector('.credit-assessment-close-button');
                const prevBtn = document.getElementById('jamCreditAssessmentPrevBtn');
                const nextBtn = document.getElementById('jamCreditAssessmentNextBtn');

                // Close button
                closeBtn.addEventListener('click', () => this.close());

                // Outside click to close
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) this.close();
                });

                // Navigation buttons
                prevBtn.addEventListener('click', () => this.prevStep());
                nextBtn.addEventListener('click', () => this.nextStep());

                // Option selection
                document.addEventListener('click', (e) => {
                    if (e.target.closest('.credit-assessment-option-btn')) {
                        this.selectOption(e.target.closest('.credit-assessment-option-btn'));
                    }
                });

                // Form input validation
                document.addEventListener('input', (e) => {
                    if (e.target.matches('[id^="jamCreditAssessment"]')) {
                        this.updateNavigation();
                    }
                });
            },

            // Select an option
            selectOption: function (button) {
                // Remove selection from other options
                document.querySelectorAll('.credit-assessment-option-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });

                // Select this option
                button.classList.add('selected');

                // Store selection
                this.quizData[`question_${this.currentStep}`] = button.dataset.value;

                this.updateNavigation();
            },

            // Go to previous step
            prevStep: function () {
                if (this.currentStep > 1) {
                    this.currentStep--;
                    this.renderQuizStep(this.currentStep);
                }
            },

            // Go to next step
            nextStep: function () {
                if (this.currentStep < this.totalSteps) {
                    this.currentStep++;
                    this.renderQuizStep(this.currentStep);
                } else {
                    this.submitQuiz();
                }
            },

            // Submit the quiz
            submitQuiz: function () {
                // Collect form data
                const formData = {
                    name: document.getElementById('jamCreditAssessmentname')?.value || '',
                    email: document.getElementById('jamCreditAssessmentemail')?.value || '',
                    phone: document.getElementById('jamCreditAssessmentphone')?.value || ''
                };

                // Combine with quiz data
                const finalData = {
                    ...this.quizData,
                    ...formData,
                    timestamp: new Date().toISOString()
                };

                // Call completion handler
                this.config.onComplete(finalData);

                this.close();
            },

            // Open the quiz modal
            open: function () {
                const modal = document.getElementById('jamCreditAssessmentModal');
                if (modal) {
                    modal.style.display = 'flex';
                    document.body.style.overflow = 'hidden';

                    // Call start handler
                    this.config.onStart();
                }
            },

            // Close the quiz modal
            close: function () {
                const modal = document.getElementById('jamCreditAssessmentModal');
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            },

            // Default event handlers
            defaultOnStart: function () {
                console.log('JAM Credit Assessment started');
            },

            defaultOnComplete: function (data) {
                console.log('JAM Credit Assessment completed:', data);
                alert('Thank you! Your credit assessment has been submitted.');
            },

            // Create a quiz button
            createButton: function (text = 'Start Credit Assessment', containerId = null) {
                const buttonHTML = `
                        <div class="credit-assessment-quiz-button-container">
                            <button class="credit-assessment-credit-quiz-btn" onclick="JAMCreditAssessment.open()">
                                ${text}
                </button>
    </div>
  `;

                if (containerId) {
                    const container = document.getElementById(containerId);
                    if (container) {
                        container.innerHTML = buttonHTML;
                    }
                } else {
                    // Return HTML string for manual insertion
                    return buttonHTML;
                }
            }
        };

        // Make it globally available
        global.JAMCreditAssessment = JAMCreditAssessment;

        // Auto-initialize if DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                JAMCreditAssessment.init();
            });
        } else {
            JAMCreditAssessment.init();
        }

        // Signal that the module is loaded
        if (global.dispatchEvent) {
            global.dispatchEvent(new CustomEvent('jamCreditAssessmentLoaded'));
            console.log('üöÄ jamCreditAssessmentLoaded event dispatched');
        }

        console.log('üöÄ JAM Credit Assessment Module loaded and exposed globally');

    })(window);
</script>